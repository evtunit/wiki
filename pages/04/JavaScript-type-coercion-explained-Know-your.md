# JavaScript type coercion explained Know your engines

[2018ë…„ 5ì›” 2ì¼ì— ìˆ˜ì •ë¨]:ì´ ê¸€ì€ [available in Russian](https://medium.com/@sergeybulavyk/%D0%BF%D1%80%D0%B5%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%82%D0%B8%D0%BF%D0%BE%D0%B2-%D0%B2-javascript-35a15ddfc333)ì˜ ê¸€ì´ë‹¤. Serj Bulavykì˜ ë…¸ë ¥ì— ë°•ìˆ˜ë¥¼ ...


*íƒ€ì… ë³€í™˜*ì€ í•œ íƒ€ì…ì—ì„œ ë‹¤ë¥¸ íƒ€ì…(ë¬¸ìì—´ì—ì„œ ìˆ«ì, objectì—ì„œ boolean ë“±)ìœ¼ë¡œ ê°’ì„ ë³€í™˜ í•˜ëŠ” ê³¼ì •ì´ë‹¤. ì›ì‹œì ì´ë“  objectì´ë“  ì–´ë–¤ íƒ€ì…ì´ë“  íƒ€ì… ë³€í™˜ì˜ ëŒ€ìƒì´ ëœë‹¤. í˜¸ì¶œ í•˜ê¸° ìœ„í•´ì„œëŠ” ì›ì‹œ íƒ€ì…ë“¤ì€ number, string, boolean, null, undefined, ES6ì— ì¶”ê°€ëœ Symbolì´ë‹¤. 

íƒ€ì… ë³€í™˜ì˜ ì‹¤ì§ˆì ì¸ ì˜ˆë¥¼ ë“¤ìë©´, ëŠìŠ¨í•œ ë™ë“± ì—°ì‚°ì ```a``` ì™€ ```b```ì˜ íƒ€ì…ì— ëŒ€í•´ ì–´ë–»ê²Œ ì ìš©ë˜ëŠ”ì§€ ë³´ì—¬ì£¼ëŠ” [JavaScript Comparison Table](https://dorey.github.io/JavaScript-Equality-Table/)ë¥¼ ë³´ë¼. ì´ í‘œëŠ”  ```==``` ì—°ì‚°ìê°€ ì•”ë¬µì ì¸ íƒ€ì…ì˜ í˜•ë³€í™˜ìœ¼ë¡œ ì¸í•´ í˜¼ëˆì„ ì£¼ê³  ì´ëŸ¬í•œ ì¡°í•©ë“¤ì€ ëª¨ë‘ ê¸°ì–µí•˜ê¸°ëŠ” í˜ë“¤ë‹¤. (scaryë¥¼ í˜¼ëˆì„ ì¤€ë‹¤ê³  ì˜ì—­í•¨...) ê·¸ë ‡ê²Œ í•  í•„ìš” ì—†ê³ , ê·¸ëƒ¥ ê¸°ë³¸ì ì¸ íƒ€ì…ì˜ íƒ€ì… ë³€í™˜ì˜ ì›ë¦¬ë¥¼ ë°°ìš°ê¸°ë§Œ í•˜ë©´ ëœë‹¤. 

ì´ ê¸€ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ íƒ€ì…ë³€í™˜ì´ ì–´ë–»ê²Œ ì‘ìš©í•˜ëŠ”ì§€ ì‹¬ì¸µì ìœ¼ë¡œ ì„¤ëª…í•˜ë©°, í•„ìˆ˜ì ì¸ ì§€ì‹ìœ¼ë¡œ ë¬´ì¥ ì‹œì¼œì¼œì£¼ë¯€ë¡œ, ë‹¤ìŒê³¼ ê°™ì€ í‘œí˜„ë“¤ì´ ì–´ë–¤ ì—°ì‚°ì„ í•˜ëŠ”ì§€ ì„¤ëª…í•˜ëŠ” ìì‹ ê°ì„ ëŠë‚„ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ê¸°ì‚¬ê°€ ëë‚  ë•Œê¹Œì§€ ë‚˜ëŠ” ë‹µì„ ë³´ì—¬ì£¼ê³  ì„¤ëª…ì„ í•˜ê² ë‹¤. 

```javascript
true + false
12 / "6"
"number" + 15 + 3
15 + 3 + "number"
[1] > null
"foo" + + "bar"
'true' == true
false == 'false'
null == ''
!!"false" == !!"true"
[â€˜xâ€™] == â€˜xâ€™
[] + null + 1
[1,2,3] == [1,2,3]
{}+[]+{}+[1]
!+[]+[]+![]
new Date(0) - 0
new Date(0) + 0
```

ê·¸ë˜ ìœ„ì˜ ì½”ë“œë“¤ì€ ê°œë°œìë¡œì„œ í•  ìˆ˜ ìˆëŠ” ê½¤ ì–´ë¦¬ì„ì€ ê²ƒ(ì‹¤ìˆ˜)ë“¤ì´ë‹¤. ì´ ì‚¬ë¡€ë“¤ì˜ 90%ì—ì„œëŠ” ì•”ë¬µì ì¸ í˜•íƒœì˜ íƒ€ì… ë³€í™˜ì˜ ê°•ì œì„±ì„ í”¼í•˜ëŠ” ê²ƒì´ ì¢‹ì•„. ìœ„ì˜ ì½”ë“œë“¤ì€ íƒ€ì… ë³€í™˜ì´ ì–´ë–»ê²Œ ì‘ìš©í•˜ëŠ”ì§€ ë‹¹ì‹ ì˜ ì§€ì‹ì„ ì‹œí—˜í•˜ê¸° ìœ„í•œ í•™ìŠµìœ¼ë¡œ í•´ë´. ì§€ë£¨í•˜ë©´ wtfjs.comì—ì„œ ë” ë§ì€ ì˜ˆë¥¼ ì°¾ì„ ìˆ˜ ìˆì–´.

ê·¸ëŸ°ë° ë•Œë•Œë¡œ Javascript ê°œë°œì ì§ì±…ì— ëŒ€í•œ ë©´ì ‘ìœ¼ë¡œ íƒ€ì… ë³€í™˜ì— ëŒ€í•´ ì§ˆë¬¸ì„ ë°›ì„ ìˆ˜ ìˆìœ¼ë‹ˆ ê³„ì† ì½ì–´ ğŸ˜„

## ì•”ë¬µì  vs. ëª…ì‹œì  í˜•ë³€í™˜

íƒ€ì… ë³€í™˜ì€ ì•”ë¬µì ì´ê±°ë‚˜ ëª…ì‹œì ì¼ ìˆ˜ ìˆë‹¤. 

ê°œë°œìê°€ ```Number(value)``` ì²˜ëŸ¼ ì ì ˆí•œ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ ìœ í˜• ê°„ì— ë³€í™˜í•  ì˜ë„ë¥¼ ë‚˜íƒ€ë‚¼ ë•Œ *ëª…ì‹œì  í˜•ë³€í™˜* (ë˜ëŠ” íƒ€ì… ìºìŠ¤íŒ…)ì´ë¼ê³  ë¶€ë¥¸ë‹¤. 

ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” íƒ€ì…ì— ëŠìŠ¨í•œ ì–¸ì–´(weakly-typed languageë¥¼ íƒ€ì…ì— ëŠìŠ¨í•œ ì–¸ì–´ë¼ê³  ë²ˆì—­í•¨)ì´ê¸° ë•Œë¬¸ì— ê°’ë„ ìë™ìœ¼ë¡œ ë‹¤ë¥¸ íƒ€ì… ê°„ì— ë³€í™˜ ë  ìˆ˜ ìˆìœ¼ë©°, ì•”ë¬µì  ë³€í™˜ì´ë¼ê³  í•œë‹¤. ì—°ì‚°ìë¥¼ ë‹¤ë¥¸ íƒ€ì…ì˜ ê°’ì— ì ìš©í•  ë•Œ ì£¼ë¡œ ë°œìƒí•œë‹¤. 

```1 == null```, ```2/'5'```, ```null + new Date()``` ë˜ëŠ” ```if (value) {â€¦}``` ì²˜ëŸ¼ ì£¼ë³€ ì»¨í…ìŠ¤íŠ¸ì— ì˜í•´ ```value```ì´ booleanìœ¼ë¡œ í˜•ë³€í™˜ì´ ì¼ì–´ë‚œë‹¤. 

ì•”ë¬µì  í˜•ë³€í™˜ì´ ë°œìƒí•˜ì§€ ì•Šì€ ì—°ì‚°ìëŠ” ì—„ê²©í•œ ë™ë“±ì—°ì‚°ìë¡œ ë¶ˆë¦¬ëŠ” ```===```ì´ë‹¤. ë°˜ë©´ ëŠìŠ¨í•œ ë™ë“±ì—°ì‚°ìëŠ” ```==```ì„ ë¹„êµí•˜ê³  í•„ìš”í•˜ë‹¤ë©´ íƒ€ì…í˜•ë³€í™˜ì´ ì¼ì–´ë‚œë‹¤. 

ì•”ë¬µì  í˜•ë³€í™˜ì€ double edge swordì´ë‹¤. ì´ê²ƒì€ ì¢Œì ˆê³¼ ê²°í•¨ì˜ í›Œë¥­í•œ ì›ì²œì´ì§€ë§Œ ë˜í•œ íŒë³„ì„±ì„ ìƒì§€ ì•Šê³  ì½”ë“œë¥¼ ì ê²Œ ì“¸ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ”ë° ìœ ìš©í•œ ë©”ì»¤ë‹ˆì¦˜ì´ë‹¤. 

## 3ê°€ì§€ ë³€í™˜ íƒ€ì…

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ëŠ” ì„¸ê°€ì§€ ë³€í™˜ íƒ€ì…ì´ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œì•¼í•œë‹¤.

- to string
- to boolean
- to number

ë‘˜ì§¸ë¡œ ì›ì‹œíƒ€ì…ê³¼ objectì— ëŒ€í•œ ë³€í™˜ ë¡œì§ì€ ë‹¤ë¥´ê²Œ ì‘ìš©í•˜ì§€ë§Œ, ì›ì‹œíƒ€ì…ê³¼ object ëª¨ë‘ ì´ ì„¸ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ë³€í™˜ë  ìˆ˜ ìˆë‹¤.

ì›ì‹œ íƒ€ì… ë¶€í„° ì‹œì‘í•˜ì !

## ë¬¸ìì—´ ë³€í™˜
ê°’ì„ ë¬¸ìì—´ë¡œ ëª…ì‹œì ìœ¼ë¡œ ë³€í™˜í•˜ë ¤ë©´ ```String()```ì„ ì‚¬ìš©í•œë‹¤. ì•”ë¬µì  í˜•ë³€í™˜ì€ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ìì—´ì¼ ë•Œ ì´ì§„ ì—°ì‚°ì ```+```ì— ì˜í•´ ì¼ì–´ë‚œë‹¤.

```javascript
String(123) // explicit
123 + ''    // implicit
```
ëª¨ë“  ì›ì‹œ ê°’ì€ ì˜ˆìƒëŒ€ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ë¬¸ìì—´ë¡œ ë³€í™˜ëœë‹¤.

```javascript
String(123)                   // '123'
String(-12.3)                 // '-12.3'
String(null)                  // 'null'
String(undefined)             // 'undefined'
String(true)                  // 'true'
String(false)                 // 'false'
```
Symbol conversion is a bit tricky, because it can only be converted explicitly, but not implicitly. Read more on ```Symbol``` coercion rules.
Symbol ë³€í™˜ì€ ëª…ì‹œì ìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆì„ ë¿, ì•”ë¬µì ìœ¼ë¡œëŠ” ë³€í™˜í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì•½ê°„ ê¹Œë‹¤ë¡­ë‹¤.```Symbol``` ê·œì¹™ì— ê´€ë ¨í•œ ê²ƒì€ https://leanpub.com/understandinges6/read/#leanpub-auto-symbol-coercion ì„ í•œë²ˆ ì½ì–´ë³´ë¼. 

```javascript
String(Symbol('my symbol'))   // 'Symbol(my symbol)'
'' + Symbol('my symbol')      // TypeError is thrown
```

## Boolean ë³€í™˜
ê°’ì„ Booleanìœ¼ë¡œ ëª…ì‹œì ìœ¼ë¡œ ë³€í™˜í•˜ë ¤ë©´ ```Boolean()```ì„ ì ìš©í•œë‹¤. ì•”ì‹œì  í˜•ë³€í™˜ì€ ë…¼ë¦¬ì ì¸ ë§¥ë½ì—ì„œ ë°œìƒí•˜ê±°ë‚˜, ë…¼ë¦¬ì—°ì‚°ì( ```||``` ```&&``` ```!```)ì— ì˜í•´ ì¼ì–´ë‚œë‹¤. 
```javascript
Boolean(2)          // explicit
if (2) { ... }      // implicit due to logical context
!!2                 // implicit due to logical operator
2 || 'hello'        // implicit due to logical operator
```

ì°¸ê³  : ```||``` ì™€ ```&&```ê³¼ ê°™ì€ ë…¼ë¦¬ ì—°ì‚°ìëŠ” ë‚´ë¶€ì ìœ¼ë¡œ boolean í˜•ë³€í™˜ì„ í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” booleanì´ ì•„ë‹ˆë”ë¼ë„ ì›ë˜ì˜ í”¼ì—°ì‚°ìì˜ ê°’ì„ ë°˜í™˜í•œë‹¤.

```javascript
// returns number 123, instead of returning true
// 'hello' and 123 are still coerced to boolean internally to calculate the expression
let x = 'hello' && 123;   // x === 123
```

boolean ë³€í™˜ì˜ ê²°ê³¼ê°€ ```true``` ë˜ëŠ” ```false```ì´ ë‘ê°€ì§€ ë¿ì´ë©°, ê±°ì§“ ê°™ì€ ê°’ë“¤ì— ëŒ€í•œ ëª©ë¡ì„ ì‰½ê²Œ ê¸°ì–µí•  ìˆ˜ ìˆë‹¤. 


```javascript
Boolean('')           // false
Boolean(0)            // false     
Boolean(-0)           // false
Boolean(NaN)          // false
Boolean(null)         // false
Boolean(undefined)    // false
Boolean(false)        // false
```
ìœ„ì˜ ì½”ë“œë“¤ì— ì—†ëŠ” ê°’ì€ object, function, ```Array```, ```Date```, user-defined type ë“± ì§„ì§œ ê°™ì€ ```true```ë¡œ ë°˜í™˜í•œë‹¤. Symbolì€ ì°¸ ê°™ì€ ê°’ì´ì´ë‹¤. ë¹ˆ objectì™€ arrayë„ ì°¸ ê°™ì€ ê°’ì´ë‹¤. 

```javascript
Boolean({})             // true
Boolean([])             // true
Boolean(Symbol())       // true
!!Symbol()              // true
Boolean(function() {})  // true
```

## ìˆ«ìí˜•ë³€í™˜
ëª…ì‹œì ìœ¼ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ì„œëŠ” ```Boolean()``` ì™€ ```String()```ì™€ ê°™ì´ ```Number()```ì„ ì‚¬ìš©í•œë‹¤. 

ë” ë§ì€ ì¼€ì´ìŠ¤ì—ì„œ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸ì— ì•”ì‹œì  í˜•ë³€í™˜ì€ ê¹Œë‹¤ë¡­ë‹¤.

- ë¹„êµì—°ì‚°ìë“¤ (```>```, ```<```, ```<=```,```>=```)
- ë¹„íŠ¸ì—°ì‚°ìë“¤ ( ```|``` ```&``` ```^``` ```~```)
- ì‚°ìˆ  ì—°ì‚°ìë“¤(```-``` ```+``` ```*``` ```/``` ```%``` ). ì°¸ê³ , ì´ì§„ ì—°ì‚°ì +ëŠ” ë¬¸ìì—´ì„ ë§Œë‚˜ë©´ ìˆ«ìí˜•ë³€í™˜ì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤. 
- unary ```+``` operator
- ëŠìŠ¨í•œ ë™ë“±ì—°ì‚°ì ```==``` (incl. ```!=```). 

ì°¸ê³  : ```==```ì€ ë‘ê°œì˜ ë¹„êµê°€ ë¬¸ìì—´ì¼ ë•Œ ìˆ«ì í˜•ë³€í™˜ì€ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.

```javascript
Number('123')   // explicit
+'123'          // implicit
123 != '456'    // implicit
4 > '5'         // implicit
5/null          // implicit
true | 0        // implicit
```
ì—¬ê¸°ì— ì›ì‹œê°’ì—ì„œ ìˆ«ìë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
```javascript
Number(null)                   // 0
Number(undefined)              // NaN
Number(true)                   // 1
Number(false)                  // 0
Number(" 12 ")                 // 12
Number("-12.34")               // -12.34
Number("\n")                   // 0
Number(" 12s ")                // NaN
Number(123)                    // 123
```
ë¬¸ìì—´ì„ ìˆ«ìë¡œ ë³€í™˜í•  ë•Œ ì—”ì§„ì€ ë¨¼ì € ë°±ìŠ¤í˜ì´ìŠ¤, ```\n```, ```\t``` ë¬¸ìì—´ì„ ì˜ë¼ì„œ ì˜ë¼ë‚¸ ë¬¸ìì—´ì´ ìœ íš¨í•œ ìˆ«ìë¥¼ ë‚˜íƒ€ë‚´ì§€ ì•Šìœ¼ë©´ ```NaN```ì„ ë°˜í™˜í•œë‹¤. ë¬¸ìì—´ì´ ë¹„ì–´ ìˆìœ¼ë©´ ```0```ì„ ë°˜í™˜í•œë‹¤. 

```null``` and ```undefined```ì€ ë‹¤ë¥´ê²Œ ë‹¤ë¤„ì§€ëŠ”ë°, ```null``` ì€ ```0```ì´ ë˜ê³ , ```undefined```ì€  ```NaN```ì´ ëœë‹¤.

Symbolsì€ ëª…ì‹œì ìœ¼ë¡œë‚˜ ì•”ë¬µì ìœ¼ë¡œ ìˆ«ìë¡œ ë³€í™˜í•  ìˆ˜ ì—†ë‹¤. ê²Œë‹¤ê°€ ```TypeError```ëŠ” ```undefined```ì²˜ëŸ¼ ```NaN```ìœ¼ë¡œ ë³€í™˜ë˜ì–´ ì§„ë‹¤. (Moreover, ```TypeError``` is thrown, instead of silently converting to ```NaN```, like it happens for ```undefined```.) 
Symbolì˜ ë³€í™˜ì˜ ê·œì¹™ì€ [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#Symbol_type_conversions)ì—ì„œ ë” ë§ì´ ë‚˜ì™€ ìˆë‹¤.

```javascript
Number(Symbol('my symbol'))    // TypeError is thrown
+Symbol('123')                 // TypeError is thrown
```

ë‘ê°€ì§€ *íŠ¹ë³„í•œ ë£°*ì´ ìˆë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•˜ë¼. 
1.```null``` ë˜ëŠ” ```undefined```ì— ```==```ì„ ì ìš©í•˜ë©´ ìˆ«ì ë³€í™˜ì€ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤. ```null```ì€ ```null``` ë˜ëŠ” ```undefined```ì— í•´ë‹¹í•˜ë©° ë‹¤ë¥¸ ì–´ë–¤ ê²ƒê³¼ ê°™ì§€ ì•Šë‹¤. 

```javascript
null == 0               // false, null is not converted to 0
null == null            // true
undefined == undefined  // true
null == undefined       // true
```

2. ```NaN```ì€ ê·¸ ìì²´ì™€ë„ ë¹„êµê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤.
```javascript
if (value !== value) { console.log("we're dealing with NaN here") }
```

## objectë¥¼ ìœ„í•œ íƒ€ì… í˜•ë³€í™˜
ì§€ê¸ˆê¹Œì§€ ì›ì‹œê°’ì— ëŒ€í•œ íƒ€ì… í˜•ë³€í™˜ì„ ì‚´í´ë³´ì•˜ë‹¤. ë³„ë¡œ í¥ë¯¸ë¡­ì§€ ì•Šì•„.

objectì™€ ì—”ì§„ì´ ```[1] + [2,3]```ê³¼ ê°™ì€ í‘œí˜„ì´ ìˆì„ ë•ŒëŠ” ë¨¼ì € objectì„ ì›ì‹œê°’ì„ ë³€í™˜í•œ ë‹¤ìŒ ìµœì¢… íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•´ì•¼í•œë‹¤. ê·¸ë¦¬ê³  ì—¬ì „íˆ ìˆ«ì, ë¬¸ìì—´, booleanì˜ ì„¸ê°€ì§€ ë³€í™˜ ìœ í˜•ë§Œ ìˆë‹¤.

ê°€ì¥ ê°„ë‹¨í•œ ê²½ìš°ëŠ” boolean í˜•ë³€í™˜ì´ë‹¤. ë¹„ ì›ì‹œê°’ì€ í•­ìƒ objectì´ë“  ë°°ì—´ì´ë“  ê°„ì— ```true```ì— ì˜í•´ ë³€í™˜ì´ ëœë‹¤.

objectëŠ” ìˆ«ì ë° ë¬¸ìì—´ ë³€í™˜ì„ ëª¨ë‘ ë‹´ë‹¹í•˜ëŠ” ë‚´ë¶€ ```[[ToPrimitive]]```ì„ í†µí•´ ì›ì‹œ ìƒíƒœë¡œ ë³€í™˜ëœë‹¤. 

ë‹¤ìŒì€ ```[[ToPrimitive]]```ì˜ ë©”ì†Œë“œì— ì˜í•œ ìˆ˜ë„ ì½”ë“œì´ë‹¤. 

```javascript
function ToPrimitive(input, preferredType){
  
  switch (preferredType){
    case Number:
      return toNumber(input);
      break;
    case String:
      return toString(input);
      break
    default:
      return toNumber(input);  
  }
  
  function isPrimitive(value){
    return value !== Object(value);
  }

  function toString(){
    if (isPrimitive(input.toString())) return input.toString();
    if (isPrimitive(input.valueOf())) return input.valueOf();
    throw new TypeError();
  }

  function toNumber(){
    if (isPrimitive(input.valueOf())) return input.valueOf();
    if (isPrimitive(input.toString())) return input.toString();
    throw new TypeError();
  }
}
```
> js-to-primitive-internal.js

```[[ToPrimitive]]```ì€ input valueê³¼ preferred typeì€ ```Number``` ì™€ ```String```ìœ¼ë¡œ ê°’ì´ ì „ë‹¬ë˜ë©° preferredTypeì€ ì¡°ê±´ì— optionalí•œ ë¶€ë¶„ì´ë‹¤.

ìˆ«ì í˜•ë³€í™˜ê³¼ ë¬¸ìì—´ ë³€í™˜ ëª¨ë‘ input ojbectì˜  ```valueOf```ì™€ ```toString```ì´ ë‘ê°€ì§€ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, ë‘ê°€ì§€ ë©”ì„œë“œëŠ” ëª¨ë‘ ```Object.prototype```ì— ëª…ì‹œë˜ì–´ ìˆì–´ ```Date```, ```Array``` ë“± íŒŒìƒëœ íƒ€ì…ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. 

ì•„ë˜ëŠ” ì¼ë°˜ì ì¸ ì•Œê³ ë¦¬ì¦˜ì´ë‹¤. 

1. inputì´ ì´ë¯¸ ì›ì‹œì ì´ë¼ë©´, ì•„ë¬´ ê²ƒë„ í•˜ì§€ ì•Šê³  ë°˜í™˜ëœë‹¤.

2. ```input.toString()```ì´ í˜¸ì¶œë˜ë©´, ê·¸ ê²°ê³¼ê°€ ì›ì‹œì ì´ë¼ë©´ ë°˜í™˜í•œë‹¤.

3. ```input.valueOf()```ì´ í˜¸ì¶œë˜ë©´, ê·¸ ê²°ê³¼ê°€ ì›ì‹œì ì´ë¼ë©´ ë°˜í™˜í•œë‹¤.

4. ```input.toString()``` ì´ë‚˜ ```input.valueOf()```ì´ ì›ì‹œì ì´ì§€ ì•Šë‹¤ë©´  ```TypeError```ë¥¼ ë°˜í™˜í•˜ë¼.

ìˆ«ì í˜•ë³€í™˜ì€ ìš°ì„  ```valueOf``` (3)ì„ í˜¸ì¶œí•˜ê³ , ```toString``` (2) í˜¸ì¶œí•œë‹¤. ë¬¸ìí˜•ë³€í™˜ì€ ```toString``` (2)ì„ í˜¸ì¶œí•œ í›„ ```valueOf``` (3) í˜¸ì¶œí•˜ì—¬ ìˆ«ì ë³€í™˜ê³¼ ë¬¸ìí˜• ë³€í™˜ì€ ë°˜ëŒ€ì´ë‹¤. 

ëŒ€ë¶€ë¶„ì˜ ë¹ŒíŠ¸ì¸ëœ íƒ€ì…ì€ ```valueOf```ì´ ì—†ê±°ë‚˜ ```this```ëŠ” objectë¥¼ ë°˜í™˜í•˜ëŠ” ```valueOf```ê°€ ì—†ì–´ì„œ ì›ì‹œì ì¸ ê²ƒì´ ì•„ë‹ˆë¯€ë¡œ ë¬´ì‹œë˜ê³  ì‡ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìˆ«ìì™€ ë¬¸ìì—´ ë³€í™˜ ëª¨ë‘ ```toString()```ì´ë¼ê³  ë¶€ë¥´ëŠ” ê²ƒìœ¼ë¡œ ëë‚  ìˆ˜ ìˆë‹¤. 

ë‹¤ë¥¸ ì—°ì‚°ìëŠ” ```preferredType```íŒŒë¼ë¯¸í„°ì˜ ë„ì›€ì„ ë°›ì•„ ìˆ«ì ë˜ëŠ” ë¬¸ìì—´ ë³€í™˜ì„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ```==```ì™€ ì´ì§„ ì—°ì‚°ì```+```ëŠ” ```default``` ë³€í™˜ ìƒíƒœë¥¼ ì¼ìœ¼í‚¤ëŠ” ë‘ê°€ì§€ ê²½ìš°ì´ë‹¤. ì´ ê²½ìš° ë¬¸ìì—´ ë³€í™˜ì„ í•˜ëŠ” ```Date```ì„ ì œì™¸í•˜ê³  ëŒ€ë¶€ë¶„ì˜ ë‚´ì¥ëœ íƒ€ì…ì€ ìˆ«ì ë³€í™˜ì„ defaultë¡œ ê°€ì •í•œë‹¤. 

```Date```ì˜ ë³€í™˜ì˜ ì˜ˆì´ë‹¤. 

```javascript
let d = new Date();

// get string representation
let str = d.toString();  // 'Wed Jan 17 2018 16:15:42'

// get numeric representation, num of milliseconds since Unix epoch
let num = d.valueOf();   // 1516198542525

// compare with a string representation
// true because d is converted to same string
console.log(d == str);   // true

// compare with numeric representation
// false, because d is not converted to a number via valueOf()
console.log(d == num);   // false

// Result is 'Wed Jan 17 2018 16:15:42Wed Jan 17 2018 16:15:42'
// '+' same to '==' triggers default conversion mode
console.log(d + d);

// Result is 0, since '-' operator explicitly triggers numeric conversion, not a default one
console.log(d - d);
```
> date-object-to-primitive-conversion.js

objectì—ì„œ ì›ì‹œê°’ìœ¼ë¡œ í˜•ë³€í™˜ ë¡œì§ì— hookì— ì˜í•´ ```toString()``` ê³¼ ```valueOf()``` ë©”ì„œë“œì˜ ê¸°ë³¸ê°’ì„ overrideí•  ìˆ˜ ìˆë‹¤.

```javascript
var obj = {
  prop: 101,
  toString(){
    return 'Prop: ' + this.prop;
  },
  valueOf() {
    return this.prop;
  }
};

console.log(String(obj));  // 'Prop: 101'
console.log(obj + '')      // '101'
console.log(+obj);         //  101
console.log(obj > 100);    //  true
view raw
```
> es5-toprimitive-hooks.js
```obj + â€˜â€™``` ê°€ ì–´ë–»ê²Œ  ```â€˜101â€™```ì„ ë¬¸ìì—´ë¡œ ë°˜í™˜í•˜ëŠ”ì§€ ì£¼ëª©í•˜ë¼. ```+``` ì—°ì‚°ìëŠ” ê¸°ë³¸ ë³€í™˜ ëª¨ë“œë¥¼ ì¼ìœ¼ì¼œ ì•ì„œ ë§í•œ ê²ƒì²˜ëŸ¼  ```Object```ì€ ìˆ«ì í˜•ë³€í™˜ì„ ë””í´íŠ¸ë¡œ ê°€ì •í•˜ì—¬ ```toString()```ì´ ì•„ë‹Œ ```valueOf()``` ë©”ì„œë“œë¥¼ ë¨¼ì € ì‚¬ìš©í•œë‹¤.

## ES6ì˜ Symbol.toPrimitive
ES5ì—ì„œëŠ” ```toString``` ì™€ ```valueOf``` ë©”ì„œë“œ overridingì— ì˜í•´ ì˜¤ë¸Œì íŠ¸ì—ì„œ ì›ì‹œê°’ìœ¼ë¡œ hook í•  ìˆ˜ ìˆë‹¤.

ES6ì—ì„œëŠ” objectì— ```[Symbol.toPrimtive]```ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ ```[[ToPrimitive]]```ì˜ ë£¨í‹´ì„ ì™„ì „íˆ ëŒ€ì²´í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

```javascript
class Disk {
  constructor(capacity){
    this.capacity = capacity;
  }

  [Symbol.toPrimitive](hint){
    switch (hint) {
      case 'string':
        return 'Capacity: ' + this.capacity + ' bytes';

      case 'number':
        // convert to KiB
        return this.capacity / 1024;

      default:
        // assume numeric conversion as a default
        return this.capacity / 1024;
    }
  }
}

// 1MiB disk
let disk = new Disk(1024 * 1024);

console.log(String(disk))  // Capacity: 1048576 bytes
console.log(disk + '')     // '1024'
console.log(+disk);        // 1024
console.log(disk > 1000);  // true
view raw
```
> es6-symbol-toprimitive.js

## ì˜ˆ
ì´ëŸ¬í•œ ì´ë¡ ì´ ì ìš©ë˜ì–´ ìˆëŠ” ë‹¤ìŒì˜ ì˜ˆë¥¼ ë“¤ì–´ë³´ì.
```javascript
true + false             // 1
12 / "6"                 // 2
"number" + 15 + 3        // 'number153'
15 + 3 + "number"        // '18number'
[1] > null               // true
"foo" + + "bar"          // 'fooNaN'
'true' == true           // false
false == 'false'         // false
null == ''               // false
!!"false" == !!"true"    // true
['x'] == 'x'             // true 
[] + null + 1            // 'null1'
[1,2,3] == [1,2,3]       // false
{}+[]+{}+[1]             // '0[object Object]1'
!+[]+[]+![]              // 'truefalse'
new Date(0) - 0          // 0
new Date(0) + 0          // 'Thu Jan 01 1970 02:00:00(EET)0'
```
ì•„ë˜ì—ì„œëŠ” ê°ê°ì˜ í‘œí˜„ì— ëŒ€í•œ ì„¤ëª…ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ì§„ì—°ì‚°ì ```+```ëŠ” ```true```ì™€ ```false```ì˜ ìˆ«ì ë³€í™˜ì„ ì¼ìœ¼í‚¨ë‹¤.

```javascript
true + false
==> 1 + 0
==> 1
```
ì‚°ìˆ ì—°ì‚°ì ```/```ëŠ” ë¬¸ìì—´ ```'6'``` ì˜ ìˆ«ì ë³€í™˜ì„ ì¼ìœ¼í‚¨ë‹¤.
```javascript
12 / '6'
==> 12 / 6
==>> 2
```
ì—°ì‚°ì ```+```ëŠ”  left-to-rightìœ¼ë¡œ ì—°ê´€ì´ ìˆê¸° ë•Œë¬¸ì—(ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì—°ì‚°ì„ ì§„í–‰í•œë‹¤ ëŠë‚Œ...) ```"number" + 15```ì´ ë¨¼ì € ë‚˜ì˜¨ë‹¤.  í•œ í”¼ì—°ì‚°ìëŠ” ë¬¸ìì—´ì´ê¸° ë•Œë¬¸ì— ```+```ì—°ì‚°ìëŠ” ìˆ«ì 15ì— ëŒ€í•œ ë¬¸ìì—´ ë³€í™˜ì„ ì¼ìœ¼í‚¨ë‹¤. ë‘ë²ˆì§¸ ë‹¨ê³„ expressionì€ ```"number15" + 3```ë„ ì²«ë²ˆì§¸ì™€ ìœ ì‚¬í•˜ê²Œ ë¹„êµê°€ ëœë‹¤.

```javascript
â€œnumberâ€ + 15 + 3 
==> "number15" + 3 
==> "number153"
```

```15 + 3```ì´ ë¨¼ì € ë¹„êµê°€ ëœë‹¤. ë‘ í”¼ì—°ì‚°ìëŠ” ëª¨ë‘ ìˆ«ìì¸ ë§Œí¼ ê°•ìš”í•  í•„ìš”ëŠ” ì „í˜€ ì—†ë‹¤. ë‘ë²ˆì§¸ ë‹¨ê³„ ì—ì„œëŠ” ```18 + 'number'```ì´ ë¨¼ì € ë¹„êµê°€ ë˜ë©°, í•˜ë‚˜ì˜ í”¼ì—°ì‚°ìëŠ” ë¬¸ìì—´ì´ê¸° ë•Œë¬¸ì— ë¬¸ìì—´ ë³€í™˜ì„ ì¼ìœ¼í‚¨ë‹¤. 

```javascript
15 + 3 + "number" 
==> 18 + "number" 
==> "18number"
```
ë¹„êµ ì—°ì‚°ì ```>```ì€ ```[1]``` ê³¼ ```null```ë¡œ ìˆ«ì ë³€í™˜ì„ ì¼ìœ¼í‚¨ë‹¤.

```javascript
[1] > null
==> '1' > 0
==> 1 > 0
==> true
```

Unary ```+``` ì—°ì‚°ìëŠ” ì´ì§„ì—°ì‚°ì  ```+```ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤. ê·¸ë˜ì„œ ```+'bar'```ê°€ ë¨¼ì € ë¹„êµê°€ ëœë‹¤. Unary ```+```ëŠ” ë¬¸ìì—´ ```'bar'```ì˜ ìˆ«ì ë³€í™˜ì„ ì¼ìœ¼í‚¨ë‹¤.ë¬¸ìì—´ì´ ìœ íš¨í•œ ìˆ«ìë¥¼ ë‚˜íƒ€ë‚´ì§€ ëª»í•˜ê¸° ë•Œë¬¸ì— ê²°ê³¼ëŠ” ```NaN```ì´ë‹¤. ë‘ë²ˆì§¸ ë‹¨ê³„ì—ì„œëŠ” ```'foo' + NaN```ì´ ë¹„êµê°€ ëœë‹¤.

```javascript
"foo" + + "bar" 
==> "foo" + (+"bar") 
==> "foo" + NaN 
==> "fooNaN"
```
```==``` ì€ ìˆ«ìí˜• ë³€í™˜ì„ ì¼ìœ¼í‚¤ê³ , ë¬¸ìì—´ ```'true'```ì„ ì „ë¶€ NaNìœ¼ë¡œ ë³€í™˜ë˜ì–´ boolean ```true```ì€ 1ë¡œ ë³€í™˜ëœë‹¤.

```javascript
'true' == true
==> NaN == 1
==> false
false == 'false'   
==> 0 == NaN
==> false
```

```==```ì€ ë³´í†µ ìˆ«ì ë³€í™˜ì„ ì¼ìœ¼í‚¤ì§€ë§Œ,```null```ì˜ ê²½ìš°ëŠ” ê·¸ë ‡ì§€ ì•Šë‹¤. ```null```ì€  ```null``` ë˜ëŠ” ```undefined``` ì´ê³ , ë‹¤ë¥¸ ì–´ë–¤ ê²ƒê³¼ë„ ê°™ì§€ ì•Šë‹¤.

```javascript
null == ''
==> false
```

```!!``` ì—°ì‚°ìëŠ” ```'true'``` ì™€ ```'false'``` ë‘ê°€ì§€ ë¬¸ìì—´ì„ trueë¡œ ë³€í™˜í•˜ëŠ”ë°, ì´ëŠ” ë¹„ì–´ ìˆì§€ ì•Šì€ ë¬¸ìì—´ì´ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ëŸ¬ê³ ë‚˜ì„œ ```==```ì€ ```true```ë¼ëŠ” ë‘ ê°œì˜ booleanì€ ì•„ë¬´ëŸ° í˜•ë³€í™˜ì—†ì´ ê°™ì€ì§€ë§Œ ì²´í¬í•œë‹¤. 

```javascript
!!"false" == !!"true"  
==> true == true
==> true
```

```==``` ì—°ì‚°ìëŠ” ë°°ì—´ì˜ ìˆ«ì ë³€í™˜ì„ ì¼ìœ¼í‚¨ë‹¤. ë°°ì—´ì˜ ```valueOf()``` ë©”ì†Œë“œëŠ” ë°°ì—´ ìì²´ë¥¼ ë°˜í™˜í•˜ì—¬ ì›ì‹œì ì¸ ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ë¬´ì‹œë˜ê³  ìˆë‹¤. ë°°ì—´ì˜ ```toString()``` ì€ ```['x']``` ì„ ```'x'``` ë¬¸ìì—´ë¡œ ë³€í™˜í•œë‹¤.

```javascript
['x'] == 'x'  
==> 'x' == 'x'
==>  true
```

```+``` ì—°ì‚°ìëŠ” ```[]```ì— ëŒ€í•œ ìˆ«ì ë³€í™˜ì„ ì¼ìœ¼í‚¨ë‹¤. ë°°ì—´ì˜ ```valueOf()``` ë©”ì„œë“œëŠ” ê¸°ë³¸ì´ ì•„ë‹Œ ë°°ì—´ ìì²´ë¥¼ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ë¬´ì‹œë˜ê³  ìˆë‹¤. ë°°ì—´ì˜ ```toString```ì€ ë¹ˆ ë¬¸ìì—´ì„ ë°˜í™˜í•œë‹¤.

ë‘ë²ˆì§¸ ë‹¨ê³„ì—ì„œëŠ” ```'' + null + 1```ìœ¼ë¡œ ë¹„êµê°€ ëœë‹¤.

```javascript
[] + null + 1  
==>  '' + null + 1  
==>  'null' + 1  
==> 'null1'
```

ë…¼ë¦¬ì ì¸ ```||``` ì™€ ```&&``` ì—°ì‚°ìëŠ” booleanìœ¼ë¡œ í˜•ë³€í™˜ì´ ë˜ì§€ë§Œ ì›ë˜ì˜ í”¼ì—°ì‚°ìëŠ” ë°˜í™˜í•˜ì§€ ì•Šë„ë¡ í•œë‹¤.  ```0```ì€ ê±°ì§“ ê°™ì€ ê°’ì¸ ë°˜ë©´ ```'0'```ì€ ì°¸ ê°™ì€ ê°’ì´ë‹¤. ì™œëƒí•˜ë©´ ë¹ˆ ë¬¸ìì—´ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì´ë‹¤. ```{}```ì˜ ë¹ˆ objectì€ ì—­ì‹œ ì°¸ ê°™ì€ ê°’ì´ë‹¤.


```javascript
0 || "0" && {}  
==>  (0 || "0") && {}
==> (false || true) && true  // internally
==> "0" && {}
==> true && true             // internally
==> {}
```

ë‘ í”¼ì—°ì‚°ìì˜ íƒ€ì…ì´ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— í˜•ë³€í™˜ì€ í•„ìš”í•˜ì§€ ì•ŠëŠ”ë‹¤. ```==```ì€ objectì˜ ë™ì¼ì„±ì´ ì•„ë‹ˆë¼ objectì˜ identityì„(my think's ... objectì˜ identityë€ ë¬´ì—‡ì¼ê¹Œ...) í™•ì¸í•˜ëŠ” ê²ƒê³¼ ë‘ ë°°ì—´ì´ ì„œë¡œ ë‹¤ë¥¸ ê²½ìš°ì´ê¸° ë•Œë¬¸ì— ê·¸ ê²°ê³¼ëŠ”  ```false```ì´ë‹¤. 

```javascript
[1,2,3] == [1,2,3]
==>  false
```
ëª¨ë“  í”¼ì—°ì‚°ìëŠ” ì›ì‹œê°’ì´ ì•„ë‹ˆë¯€ë¡œ ```+```ëŠ” ê°€ì¥ ì™¼ìª½ì— ìˆëŠ” ìˆ«ì ë³€í™˜ìœ¼ë¡œ ë¶€í„° ì‹œì‘í•œë‹¤. ```Objectâ€™s``` ì™€ ```Arrayâ€™s```ì˜ ```valueOf``` ë©”ì„œë“œëŠ” objectìì²´ë¥¼ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ë¬´ì‹œë˜ê³  ìˆë‹¤. ```toString()```ì€ fallbackìœ¼ë¡œ ì‚¬ìš©ëœë‹¤. ì—¬ê¸°ì„œ trickì€ ì²«ë²ˆì§¸ë¡œ ```{}```ì€ ë¬¸ì ê·¸ëŒ€ë¡œê°€ ì•„ë‹ˆë¼ ë¸”ë¡ ì„ ì–¸ë¬¸ì²˜ëŸ¼ ì—¬ê²¨ì ¸ ë¬´ì‹œëœë‹¤ëŠ” ê²ƒì´ë‹¤. ê·¸ë˜ì„œ ë¹„êµëŠ” ```toString()``` ë©”ì†Œë“œë¥¼ í†µí•´ ë¹ˆ ë¬¸ìì—´ë¡œ ë³€í™˜ëœ ë‹¤ìŒ ```+[]``` ì‹ì—ì„œ ì‹œì‘ë˜ì–´ ```0```ìœ¼ë¡œ ë³€í™˜ëœë‹¤.

```javascript
{}+[]+{}+[1]
==> +[]+{}+[1]
==> 0 + {} + [1]
==> 0 + '[object Object]' + [1]
==> '0[object Object]' + [1]
==> '0[object Object]' + '1'
==> '0[object Object]1'
```

ì´ê²ƒì€ ì—°ì‚°ì ìš°ì„  ìˆœìœ„ì— ë”°ë¼ ì°¨ê·¼ì°¨ê·¼ ì„¤ëª…í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

```javascript
!+[]+[]+![]  
==> (!+[]) + [] + (![])
==> !0 + [] + false
==> true + [] + false
==> true + '' + false
==> 'truefalse'
```

```-``` ì—°ì‚°ìëŠ” ìˆ«ì í˜•ë³€í™˜ì„ ì¼ìœ¼í‚¨ë‹¤. ```Date```. ```Date.valueOf()```ì€ ìœ ë‹‰ìŠ¤ ì´í›„ ìˆ˜ ë°€ë¦¬ì´ˆë¥¼ ë°˜í™˜í•œë‹¤.

```javascript
new Date(0) - 0
==> 0 - 0
==> 0
```

```+``` ì—°ì‚°ìëŠ” ê¸°ë³¸ì ì¸ ë³€í™˜ì„ ì¼ìœ¼í‚¤ê³ , DateëŠ” ë¬¸ìì—´ í˜•ë³€í™˜ì„ ê¸°ë³¸ìœ¼ë¡œ ê°€ì •í•˜ê¸° ë•Œë¬¸ì— ```valueOf()``` ê°€ ì•„ë‹ˆë¼ ```toString()``` ë©”ì„œë“œê°€ ì‚¬ìš©ëœë‹¤.

```javascript
new Date(0) + 0
==> 'Thu Jan 01 1970 02:00:00 GMT+0200 (EET)' + 0
==> 'Thu Jan 01 1970 02:00:00 GMT+0200 (EET)0'
```

## ì°¸ê³  ìë£Œ
 
Nicholas C. Zakasê°€ ì“´ [Understanding ES6](https://leanpub.com/understandinges6) ì±…ì´ ê°€ì¥ ì˜ ì“°ì—¬ì¡Œë‹¤ê³  ì¶”ì²œí•œë‹¤. ì´ ì±…ì€ ë„ˆë¬´ ë†’ì€ ë ˆë²¨ì´ ì•„ë‹ˆë¼ í›Œë¥­í•œ ES6 í•™ìŠµ ìë£Œë¡œ ë‚´ì‹¤ì„ ë„ˆë¬´ ë§ì´ íŒŒê³  ë“¤ì§€ ì•ŠëŠ”ë‹¤. 

Axel Rauschmayerì´ ì“´ [SpeakingJS](http://speakingjs.com/)ì€ ES5ë¥¼ ìµíˆê¸°ì— ì¢‹ë‹¤.

(Russian) Ğ¡Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ ÑƒÑ‡ĞµĞ±Ğ½Ğ¸Ğº Javascriptâ€Šâ€”â€Šhttps://learn.javascript.ru/. ì´ ê²ƒì€ íƒ€ì… í˜•ë³€í™˜ì— ëŒ€í•œ ë‘ í˜ì´ì§€ê°€ ìˆë‹¤.

JavaScript Comparison Tableâ€Šâ€”â€Šhttps://dorey.github.io/JavaScript-Equality-Table/

wtfjsâ€Šâ€”â€Šì‘ì€ ì½”ë“œë“¤ì„ ì œê³µí•¨â€Šâ€”â€Šhttps://wtfjs.com/